<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>md/modules-and-imports.md</title>
  <style>
    html {
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 12px;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      html {
        background-color: white;
      }
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    svg {
      height: auto;
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, Consolas, 'Lucida Console', monospace;
      font-size: 85%;
      margin: 0;
      hyphens: manual;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { color: #008000; } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { color: #008000; font-weight: bold; } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<header id="title-block-header">
<h1 class="title">md/modules-and-imports.md</h1>
</header>
<nav id="TOC" role="doc-toc">
<ul>
<li><a href="#modules-and-imports" id="toc-modules-and-imports">Modules
and imports</a>
<ul>
<li><a href="#importing-from-the-motoko-base-library"
id="toc-importing-from-the-motoko-base-library">Importing from the
Motoko base library</a></li>
<li><a href="#importing-local-files"
id="toc-importing-local-files">Importing local files</a></li>
<li><a href="#importing-from-another-package-or-directory"
id="toc-importing-from-another-package-or-directory">Importing from
another package or directory</a></li>
<li><a href="#importing-packages-from-a-package-manager"
id="toc-importing-packages-from-a-package-manager">Importing packages
from a package manager</a></li>
<li><a href="#importing-actor-classes"
id="toc-importing-actor-classes">Importing actor classes</a></li>
<li><a href="#importing-from-another-canister-smart-contract"
id="toc-importing-from-another-canister-smart-contract">Importing from
another canister smart contract</a></li>
<li><a href="#naming-imported-modules"
id="toc-naming-imported-modules">Naming imported modules</a></li>
</ul></li>
</ul>
</nav>
<h1 id="modules-and-imports">Modules and imports</h1>
<p>This section provides examples of different scenarios for using the
<code>module</code> and <code>import</code> keywords.</p>
<p>To illustrate how these keywords are used, letâ€™s step through some
sample code.</p>
<h2 id="importing-from-the-motoko-base-library">Importing from the
Motoko base library</h2>
<p>One of the most common import scenarios is one that you see
illustrated in the examples in this guide, in the Motoko projects in the
examples repository, and in the tutorials involves importing modules
from the Motoko base library. Importing modules from the base library
enables you to re-use the values, functions and types defined in those
modules rather than writing similar ones from scratch.</p>
<p>The following two lines import functions from the <code>Array</code>
and <code>Result</code> modules:</p>
<pre class="motoko"><code>import Array &quot;mo:base/Array&quot;;
import Result &quot;mo:base/Result&quot;;</code></pre>
<p>Notice that the import declaration includes the <code>mo:</code>
prefix to identify the module as a Motoko module and that the
declaration does not include the <code>.mo</code> file type
extension.</p>
<p>Above example uses an identifier pattern to import modules wholesale,
but you can also selectively import a subset of symbols from a module by
resorting to the object pattern syntax:</p>
<pre class="motoko"><code>import { map; find; foldLeft = fold } = &quot;mo:base/Array&quot;;</code></pre>
<p>In this example, the functions <code>map</code> and <code>find</code>
are imported unaltered, while the <code>foldLeft</code> function is
renamed to <code>fold</code>.</p>
<h2 id="importing-local-files">Importing local files</h2>
<p>Another common approach to writing programs in Motoko involves
splitting up the source code into different modules. For example, you
might design an application to use the following model:</p>
<ul>
<li><p>a <code>main.mo</code> file to contain the actor and functions
that change state.</p></li>
<li><p>a <code>types.mo</code> file for all of your custom type
definitions.</p></li>
<li><p>a <code>utils.mo</code> file for functions that do work outside
of the actor.</p></li>
</ul>
<p>In this scenario, you might place all three files in the same
directory and use a local import to make the functions available where
they are needed.</p>
<p>For example, the <code>main.mo</code> contains the following lines to
reference the modules in the same directory:</p>
<pre class="motoko"><code>import Types &quot;types&quot;;
import Utils &quot;utils&quot;;</code></pre>
<p>Because these lines import modules from the local project instead of
the Motoko library, these import declarations donâ€™t use the
<code>mo:</code> prefix.</p>
<p>In this example, both the <code>types.mo</code> and
<code>utils.mo</code> files are in the same directory as the
<code>main.mo</code> file. Once again, import does not use the
<code>.mo</code> file suffix.</p>
<h2 id="importing-from-another-package-or-directory">Importing from
another package or directory</h2>
<p>You can also import modules from other packages or from directories
other than the local directory.</p>
<p>For example, the following lines import modules from a
<code>redraw</code> package that is defined as a dependency:</p>
<pre class="motoko"><code>import Render &quot;mo:redraw/Render&quot;;
import Mono5x5 &quot;mo:redraw/glyph/Mono5x5&quot;;</code></pre>
<p>You can define dependencies for a project using the Vessel package
manager or in the project <code>dfx.json</code> configuration file.</p>
<p>In this example, the <code>Render</code> module is in the default
location for source code in the <code>redraw</code> package and the
<code>Mono5x5</code> module is in a <code>redraw</code> package
subdirectory called <code>glyph</code>.</p>
<h2 id="importing-packages-from-a-package-manager">Importing packages
from a package manager</h2>
<p>To download and install third-party packages, a package manager such
as <a href="https://mops.one">Mops</a> or <a
href="https://github.com/dfinity/vessel">Vessel</a> can be used.</p>
<p>To use either package manager, edit your project's
<code>dfx.json</code> file to specify a <code>packtool</code>, such
as:</p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;defaults&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;build&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;packtool&quot;</span><span class="fu">:</span> <span class="st">&quot;mops sources&quot;</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">}</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>For Vessel, use <code>vessel sources</code>.</p>
<p>Then, to download a package with the <code>mops</code> CLI tool, use
a command such as:</p>
<pre><code>mops add vector</code></pre>
<p>For Vessel, edit the <code>vessel.dhall</code> file to include what
packages your project will import.</p>
<p>Then, import the packages as you would import other packages in the
Motoko source file:</p>
<pre class="motoko"><code>import Vec &quot;mo:vector&quot;;
import Vec &quot;mo:vector/Class&quot;;</code></pre>
<h2 id="importing-actor-classes">Importing actor classes</h2>
<p>While module imports are typically used to import libraries of local
functions and values, they can also be used to import actor classes.
When an imported file consists of a named actor class, the client of the
imported field sees a module containing the actor class.</p>
<p>This module has two components, both named after the actor class:</p>
<ul>
<li><p>a type definition, describing the interface of the class,
and</p></li>
<li><p>an asynchronous function, that takes the class parameters as
arguments an asynchronously returns a fresh instance of the
class.</p></li>
</ul>
<p>For example, a Motoko actor can import and instantiate the
<code>Counter</code> class described in <a
href="actors-async.md#actor-classes-generalize-actors">Actors and async
data</a> as follows:</p>
<p><code>Counters.mo</code>:</p>
<pre class="motoko"><code></code></pre>
<p><code>CountToTen.mo</code>:</p>
<pre class="motoko"><code></code></pre>
<p>The call to <code>Counters.Counter(1)</code> installs a fresh counter
on the network. Installation is asynchronous, so the caller must
<code>await</code> the result.</p>
<p>The type annotation <code>: Counters.Counter</code> is redundant
here. Itâ€™s included only to illustrate that the type of the actor class
is available when required.</p>
<h2 id="importing-from-another-canister-smart-contract">Importing from
another canister smart contract</h2>
<p>In addition to the examples above that import Motoko modules, you can
also import actors (and their shared functions) from canister smart
constracts by using the <code>canister:</code> prefix in place of the
<code>mo:</code> prefix.</p>
<p>:::note</p>
<p>Unlike a Motoko library, an imported canister can be implemented in
any other Internet Computer language that emits Candid interfaces for
its canister smart contracts (for instance Rust). It could even be an
older or newer version of Motoko.</p>
<p>:::</p>
<p>For example, you might have a project that produces the following
three canisters:</p>
<ul>
<li><p>BigMap (implemented in Rust)</p></li>
<li><p>Connectd (implemented in Motoko)</p></li>
<li><p>LinkedUp (implemented in Motoko)</p></li>
</ul>
<p>These three canisters are declared in the projectâ€™s
<code>dfx.json</code> configuration file and compiled by running
<code>dfx build</code>.</p>
<p>You can then use the following lines to import the
<code>BigMap</code> and <code>Connectd</code> canisters as actors in the
Motoko LinkedUp actor:</p>
<pre class="motoko"><code>import BigMap &quot;canister:BigMap&quot;;
import Connectd &quot;canister:connectd&quot;;</code></pre>
<p>When importing canisters, it is important to note that the type for
the imported canister corresponds to a <strong>Motoko actor</strong>
instead of a <strong>Motoko module</strong>. This distinction can affect
how some data structures are typed.</p>
<p>For the imported canister actor, types are derived from the Candid
file â€” the <em>project-name</em>.did file â€” for the canister rather than
from Motoko itself.</p>
<p>The translation from Motoko actor type to Candid service type is
mostly, but not entirely, one-to-one, and there are some distinct Motoko
types that map to the same Candid type. For example, the Motoko
<code>Nat32</code> and <code>Char</code> types both exported as Candid
type <code>nat32</code>, but <code>nat32</code> is canonically imported
as Motoko <code>Nat32</code>, not <code>Char</code>.</p>
<p>The type of an imported canister function, therefore, might differ
from the type of the original Motoko code that implements it. For
example, if the Motoko function had type
<code>shared Nat32 -&gt; async Char</code> in the implementation, its
exported Candid type would be <code>(nat32) -&gt; (nat32)</code> but the
Motoko type imported from this Candid type will actually be the
correctâ€”but perhaps unexpectedâ€”type
<code>shared Nat32 -&gt; async Nat32</code>.</p>
<h2 id="naming-imported-modules">Naming imported modules</h2>
<p>Although the most common convention is to identify imported modules
by the module name as illustrated in the examples above, thereâ€™s no
requirement for you to do so. For example, you might want to use
different names to avoid naming conflicts or to simplify the naming
scheme.</p>
<p>The following examples illustrate different names you might use when
importing the <code>List</code> base library module, avoiding a clash
with another <code>List</code> library from a fictional
<code>collections</code> package.</p>
<pre class="motoko"><code>import List &quot;mo:base/List:&quot;;
import Sequence &quot;mo:collections/List&quot;;
import L &quot;mo:base/List&quot;;</code></pre>
</body>
</html>
