<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>md/motoko.md</title>
  <style>
    html {
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 12px;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      html {
        background-color: white;
      }
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    svg {
      height: auto;
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, Consolas, 'Lucida Console', monospace;
      font-size: 85%;
      margin: 0;
      hyphens: manual;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<header id="title-block-header">
<h1 class="title">md/motoko.md</h1>
</header>
<nav id="TOC" role="doc-toc">
<ul>
<li><a href="#motoko-programming-language"
id="toc-motoko-programming-language">Motoko programming language</a>
<ul>
<li><a href="#native-canister-smart-contract-support"
id="toc-native-canister-smart-contract-support">Native canister smart
contract support</a></li>
<li><a href="#code-sequentially-in-direct-style"
id="toc-code-sequentially-in-direct-style">Code sequentially in direct
style</a></li>
<li><a href="#modern-type-system" id="toc-modern-type-system">Modern
type system</a></li>
<li><a href="#autogenerated-idl-files"
id="toc-autogenerated-idl-files">Autogenerated IDL files</a></li>
<li><a href="#orthogonal-persistence"
id="toc-orthogonal-persistence">Orthogonal persistence</a></li>
<li><a href="#upgrades" id="toc-upgrades">Upgrades</a></li>
<li><a href="#and-more-" id="toc-and-more-">And more …​</a></li>
</ul></li>
</ul>
</nav>
<h1 id="motoko-programming-language">Motoko programming language</h1>
<p>:::tip</p>
<p>The Motoko programming language continues to evolve with each release
of the <a
href="https://internetcomputer.org/docs/current/developer-docs/setup/install">IC
SDK</a> and with ongoing updates to the Motoko compiler. Check back
regularly to try new features and see what’s changed.</p>
<p>:::</p>
<p>The Motoko programming language is a new, modern and type safe
language for developers who want to build the next generation of
distributed applications to run on the Internet Computer blockchain
network. Motoko is specifically designed to support the unique features
of the Internet Computer and to provide a familiar yet robust
programming environment. As a new language, Motoko is constantly
evolving with support for new features and other improvements.</p>
<p>The Motoko compiler, documentation and other tooling is <a
href="https://github.com/dfinity/motoko">open source</a> and released
under the Apache 2.0 license. Contributions are welcome.</p>
<h2 id="native-canister-smart-contract-support">Native canister smart
contract support</h2>
<p>Motoko has native support for Internet Computer canister smart
contracts.</p>
<p>A canister smart contract (or canister for short) is expressed as a
Motoko actor. An actor is an autonomous object that fully encapsulates
its state and communicates with other actors only through asynchronous
messages.</p>
<p>For example, this code defines a stateful <code>Counter</code>
actor.</p>
<pre class="motoko"><code></code></pre>
<p>Its single public function, <code>inc()</code>, can be invoked by
this and other actors, to both update and read the current state of its
private field <code>value</code>.</p>
<h2 id="code-sequentially-in-direct-style">Code sequentially in direct
style</h2>
<p>On the Internet Computer, canisters can communicate with other
canisters by sending asynchronous messages.</p>
<p>Asynchronous programming is hard, so Motoko enables you to author
asynchronous code in much simpler, sequential style. Asynchronous
messages are function calls that return a <em>future</em>, and the
<code>await</code> construct allows you to suspend execution until a
future has completed. This simple feature avoids the "callback hell" of
explicit asynchronous programming in other languages.</p>
<pre class="motoko"><code></code></pre>
<h2 id="modern-type-system">Modern type system</h2>
<p>Motoko has been designed to be intuitive to those familiar with
JavaScript and other popular languages, but offers modern features such
as sound structural types, generics, variant types, and statically
checked pattern matching.</p>
<pre class="motoko"><code></code></pre>
<h2 id="autogenerated-idl-files">Autogenerated IDL files</h2>
<p>A Motoko actor always presents a typed interface to its clients as a
suite of named functions with argument and (future) result types.</p>
<p>The Motoko compiler (and SDK) can emit this interface in a language
neutral format called Candid, so other canisters, browser resident code
and smart phone apps that support Candid can use the actor’s services.
The Motoko compiler can consume and produce Candid files, allowing
Motoko to seamlessly interact with canisters implemented in other
programming languages (provided they support Candid).</p>
<p>For example, the previous Motoko <code>Counter</code> actor has the
following Candid interface:</p>
<pre class="candid"><code>service Counter : {
  inc : () -&gt; (nat);
}</code></pre>
<h2 id="orthogonal-persistence">Orthogonal persistence</h2>
<p>The Internet Computer persists the memory and other state of your
canister as it executes. Thus the state of a Motoko actor, including its
in-memory data structures, survive indefinitely. Actor state does not
need to be explicitly "restored" and "saved" to external storage, with
every message.</p>
<p>For example, in the following <code>Registry</code> actor (canister),
that assigns sequential IDs to textual names, the state of the hash
table is preserved across calls, even though the state of the actor is
replicated across many Internet Computer node machines, and typically
not resident in memory.</p>
<pre class="motoko"><code></code></pre>
<h2 id="upgrades">Upgrades</h2>
<p>Motoko provides numerous features to help you leverage orthogonal
persistence, including language features that allow you to retain a
canister’s data as you upgrade the code of the canister.</p>
<p>For example, Motoko lets you declare certain variables as
<code>stable</code>. The values of <code>stable</code> variables are
automatically preserved across canister upgrades.</p>
<p>Consider a stable counter:</p>
<pre class="motoko"><code></code></pre>
<p>It can be installed, incremented <em>n</em> times, and then upgraded,
without interruption, to, for example, the richer implementation:</p>
<pre class="motoko"><code></code></pre>
<p>Because <code>value</code> was declared <code>stable</code>, the
current state, <em>n</em>, of the service is retained after the upgrade.
Counting will continue from <em>n</em>, not restart from
<code>0</code>.</p>
<p>Because the new interface is compatible with the previous one,
existing clients referencing the canister will continue to work, but new
clients will be able to exploit its upgraded functionality (the
additional <code>reset</code> function).</p>
<p>For scenarios that can’t be solved using stable variables alone,
Motoko provides user-definable upgrade hooks that run immediately before
and after upgrade, and allow you to migrate arbitrary state to stable
variables.</p>
<h2 id="and-more-">And more …​</h2>
<p>Motoko provides many other developer productivity features, including
subtyping, arbitrary precision arithmetic and garbage collection.</p>
<p>Motoko is not, and is not intended to be, the only language for
implementing canister smart contracts. If it doesn’t suit your needs,
there is a canister development kit <a
href="https://github.com/dfinity/cdk-rs">(CDK) for the Rust programming
language</a>. Our goal is to enable any language (with a compiler that
targets WebAssembly) to be able to produce canister smart contracts that
run on the Internet Computer and interoperate with other, perhaps
foreign, canister smart contracts through language neutral Candid
interfaces.</p>
<p>Its tailored design means Motoko should be the easiest and safest
language for coding on the Internet Computer, at least for the
forseeable future.</p>
</body>
</html>
